Fix TTY inheritance for interactive LLM agents

Fixed "Error: 'i'" by ensuring subprocess calls inherit TTY from parent process
for interactive agents, and replaced script with tee for session capture.

Root Cause Analysis:

The cryptic "Error: 'i'" occurred because:

1. pattern_designer.py and aggregator.py used subprocess.run(cmd) without TTY inheritance
2. Even when run from a real terminal, subprocess didn't have TTY access
3. Codex CLI checks isatty() and fails with truncated error when no TTY
4. The error "stdout is not a terminal" was being truncated to "Error: 'i'"
5. Additionally, the script command for session capture was failing in non-TTY contexts

Changes Made:

* src/agents/pattern_designer.py (line 131):
  - Before: result = subprocess.run(cmd)
  - After: result = subprocess.run(cmd, stdin=sys.stdin, stdout=sys.stdout, stderr=sys.stderr)
  - Effect: Interactive CLI now inherits parent's TTY for proper terminal access

* src/agents/aggregator.py (line 157):
  - Before: result = subprocess.run(cmd)
  - After: result = subprocess.run(cmd, stdin=sys.stdin, stdout=sys.stdout, stderr=sys.stderr)
  - Effect: Interactive CLI now inherits parent's TTY for proper terminal access

* src/llm_caller.sh:
  - Claude: Replaced script with tee for session capture (works in all contexts)
  - Gemini: Replaced script with tee for session capture (works in all contexts)
  - Codex: Special handling to preserve TTY access without piping
    • Interactive mode: Runs directly without output capture
    • Saves only session start/end timestamps
    • Allows TTY passthrough for interactive use

* README.md:
  - Added note about Codex TTY requirements
  - Documented limitations for interactive vs headless modes
  - Added blank lines around lists for markdown linting

How subprocess TTY Inheritance Works:

By default, subprocess.run(cmd) creates new pipes for stdin/stdout/stderr:
- Parent's TTY: /dev/ttys001 (or similar)
- Subprocess stdin: pipe (not a TTY)
- Subprocess stdout: pipe (not a TTY)
- Result: isatty() returns False in subprocess

With stdin=sys.stdin, stdout=sys.stdout, stderr=sys.stderr:
- Parent's TTY: /dev/ttys001
- Subprocess stdin: /dev/ttys001 (inherited)
- Subprocess stdout: /dev/ttys001 (inherited)
- Result: isatty() returns True in subprocess

This allows interactive CLIs (Codex, Claude, Gemini) to:
- Detect they're running in a terminal
- Enable interactive features (prompts, colors, etc.)
- Properly handle user input

Agent Types and TTY Requirements:

Interactive Agents (need TTY):
- Pattern Designer: Creates rubric and marking criteria with instructor
- Aggregator: Compiles final grades and statistics
- Now properly inherit TTY from parent terminal

Headless Agents (don't need TTY):
- Marker: Evaluates student work (uses capture_output=True)
- Normalizer: Aggregates assessments (uses capture_output=True)
- Unifier: Applies final scheme (uses capture_output=True)
- Already working correctly with output capture

Testing:

Before fix:
✗ ./mark_structured.sh → "Error: 'i'" when running Pattern Designer
✗ Codex interactive mode failed even from real terminal
✗ subprocess.run() didn't have TTY access

After fix:
✓ ./mark_structured.sh → Pattern Designer launches interactively
✓ Codex detects TTY and runs in interactive mode
✓ Claude and Gemini work with tee-based session capture
✓ All headless agents continue working with output capture

Provider-Specific Behavior:

Claude Code CLI:
- Interactive: Accepts piped input via stdin
- Session capture: Full capture via tee
- TTY requirement: Not strict (works with or without)

Gemini CLI:
- Interactive: Accepts piped input via stdin
- Session capture: Full capture via tee
- TTY requirement: Not strict (works with or without)

Codex CLI:
- Interactive: Requires real TTY (strict isatty() check)
- Session capture: Limited to timestamps only
- TTY requirement: Strict (fails without TTY)

User Impact:

Before: Users saw cryptic "Error: 'i'" when trying to run marking workflow
After: Users can successfully run interactive agents from their terminal

The fix ensures that:
1. When instructors run ./mark_structured.sh from terminal, it works
2. Interactive agents can properly interact with the user
3. Session logs are captured (fully for Claude/Gemini, timestamps for Codex)
4. Headless agents continue working in parallel execution

Remaining Limitation:

Codex interactive sessions cannot be fully logged without breaking TTY access.
This is an inherent limitation of Codex CLI's strict TTY requirement.
Workaround: Use Claude or Gemini for workflows requiring full session capture.
